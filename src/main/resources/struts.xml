<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">
<struts>
    <!-- 开发提示：出错时打印更详细的信息-->
    <constant name="struts.devMode" value="true"/>
    <!--开启注解，部分返回json的也可以直接用注解-->
    <constant name="struts.convention.action.packages" value="com.controller" />


    <!-- 默认访问页面 -->
    <package name="default" extends="struts-default" namespace="/">
        <default-action-ref name="default"/>
        <action name="default">
            <result>/index.jsp</result>
        </action>
    </package>

    <!--避免重复提交》多次点击提交》成功提交回退后再次提交》已经为转发状态下/upload_upload刷新重新提交表单-->
    <!--在jsp使用<s:token>,配置token或tokensession拦截器，前者需要配合invalid.token，后者方便-->
    <!--使用了自定义的拦截器，系统默认取消默认拦截器，需自己加上去-->
    <!--excludeMethods表示拦截器放行的方法，就是允许用户操作的,includeMethods表示要拦截的方法，就是不允许的操作-->
    <!-- Struts2在2.5版本后添加strict-method-invocation(严格方法访问)，默认为true，不能使用动态方法调用功能，故需设为false -->
    <package name="upload" extends="struts-default" namespace="/method" strict-method-invocation="false">
      <!-- 指定全局的结果
        <global-results>
            <result name="testGlobal" type="">/testGlobal.jsp</result>
        </global-results>-->
        <action name="*_*" class="com.controller.{1}Action" method="{2}">
            <interceptor-ref name="tokenSession"><param name="excludeMethods">toUpload,page,toLoad,resource</param></interceptor-ref>
            <interceptor-ref name="defaultStack"/>
            <result name="resource">/jsp/testRes.jsp</result>

            <result name="success">/jsp/success.jsp</result>
            <result name="forwardToUpload">/jsp/exampleList.jsp</result>
            <result name="forwardToLook">/jsp/readFile.jsp</result>
            <result name="page">/jsp/page.jsp</result>
            <result name="toLoad">/jsp/load.jsp</result>
        </action>


    </package>

   <!-- <package name="json" extends="json-default" namespace="/json" strict-method-invocation="false">
        &lt;!&ndash; 登陆 &ndash;&gt;
        <action name="*_*" class="com.controller.{1}Action" method="{2}">
            <result name="showList"  type="json"><param name="root">objects</param></result>
        </action>
    </package>-->

</struts>